<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìë°”ìŠ¤í¬ë¦½íŠ¸ : ê²€ìƒ‰07</title>

    <link rel="stylesheet" href="../../../javascript/assets/css/style.css">
    <link rel="stylesheet" href="../../../javascript/assets/css/dracula.css">

    <style>
        #main .document .btnflex{
    	    display: flex;
        }
    </style>
</head>

<body>
    <header id="header">
        <!-- ì‹œë©˜íŠ¸íƒœê·¸(heaer, main, footer ë“±)-->
        <h1><a href="../../../javascript/index.html">Javascript_Search</a></h1>
    </header>
    <!-- //header -->
    <main id="main">
        <!--main start-->
        <div class="document">
            <h2 class="t_tit">ê²€ìƒ‰ íš¨ê³¼07</h2>
            <div class="t_desc2">
                ê²€ìƒ‰ íš¨ê³¼ ì—¬ì„¯ë²ˆì§¸ ì‹œê°„ì…ë‹ˆë‹¤. ì†ì„± ì°¾ê¸° ê²Œì„ì„ í•´ë³´ë„ë¡í•´ìš”.
            </div>
            <hr>
            
            <div class="t_iframe" style="min-height: 1000px; padding-top: 0;">
                <iframe src="https://parkhyeonshin.github.io/Coding/javascript/effect/searchEffect07.html" frameborder="0"></iframe>
            </div>
            
            <div class="t_link btnflex">
                <a href="https://github.com/Parkhyeonshin/Coding/blob/main/javascript/effect/searchEffect07.html" target="_blank">ì›ë³¸ ì†ŒìŠ¤ ë³´ê¸°</a>
                <a href="https://parkhyeonshin.github.io/Coding/javascript/effect/searchEffect07.html" target="_blank">ì›ë³¸ ì‚¬ì´íŠ¸</a>
            </div>
            <hr>
           
            
            <h3 class="t_tit2">JS ì†ŒìŠ¤</h3>
            <div class="t_code">
<pre><code class="language-js">// ë‚´ìš©ì†ŒìŠ¤ëŠ” ì•„ì´í”„ë ˆì„ ì°¸ì¡°í•´ì£¼ì„¸ìš”.
const serachTime = document.querySelector(".time span");
const serachList = document.querySelector(".search__list");
const searchAnswers = document.querySelector(".search__answers");
const searchMissAnswers = document.querySelector(".search__missAnswers");
const searchStart = document.querySelector(".search__box .start");
const searchInput = document.querySelector("#search");
const searchAudio = document.querySelector("#audio");
const searchNum = document.querySelector(".search__info .num");     //ì „ì²´ ê°œìˆ˜
const musicStop = document.querySelector(".search__audio .stop");
const searchResult = document.querySelector(".search__result .result");
const searchResultWrap = document.querySelector(".search__result");
const searchRestart = document.querySelector(".search__result .restart");


let timeReamining = 120,        // ë‚¨ì€ ì‹œê°„
    score = 0,                  // ì ìˆ˜
    answers = {};               // ìƒˆë¡œìš´ ì •ë‹µ

let answerCount = 0;
let Timer = 0;


function updateList() {
    cssProperty.forEach(data => {
        serachList.innerHTML += `&lt;span>${data.name}&lt;/span>`;
    });
    searchNum.innerHTML = cssProperty.length; // í”„ë¡œí¼í‹° ì´ ê°¯ìˆ˜ 
}
updateList();

// ê²Œì„ ì‹œì‘í•˜ê¸°
function startQuiz() {
    // ì¸í’‹ë°•ìŠ¤ ì´ˆê¸°í™”
    searchInput.value = "";

    answerCount = 0;
    // ì‹œì‘ ë²„íŠ¼ ì—†ì• ê¸°, ì†ì„± ë¦¬ìŠ¤íŠ¸ ì—†ì• ê¸°
    searchStart.style.display = "none";
    serachList.style.display = "none";

    // ê²Œì„ ì‹œì‘ë˜ë©´? --> ì‹œê°„ ì„¤ì •

    // setInterval(Timer);
    Timer = setInterval(reduceTime, 1000);

    // ìŒì•… ì¶”ê°€í•˜ê¸°
    musicStop.style.display = "block";
    searchAudio.play();

    // ì ìˆ˜ ê³„ì‚°




    // ì •ë‹µ ì²´í¬
    checkAnswers();

};



// ì¸í’‹ ì²´í¬(ì¸í’‹ë°•ìŠ¤ ê°ì§€?)
function checkInput() {
    let input = event.currentTarget.value.trim().toLowerCase();       // ì‚¬ìš©ìê°€ ì“´ ê°’ 

    if (answers.hasOwnProperty(input) && !answers[input]) {      // inputì…ë ¥ê°’ì„ í™•ì¸í•´ì„œ T/F ë°˜í™˜
        answers[input] = true;              // ì¼ì¹˜í•˜ë©´ T ë°˜í™˜ì´ë¯€ë¡œ ê°ì²´ ê°’ Të¡œ ë³€í™˜
        // ì •ë‹µ í‘œì‹œ
        searchAnswers.style.display = "block";
        searchAnswers.innerHTML += `&lt;span>${input}&lt;/span>`;

        answerCount++;
        document.querySelector(".answerNum").innerText = answerCount;

        // ì •ë‹µ ì´ˆê¸°í™”
        searchInput.value = "";

    }

}

// ì •ë‹µ ì²´í¬í•˜ê¸° : ì •ë‹µì„ ê°ì²´í™” ì‹œí‚¤ê¸° (ê¸°ë³¸ê°’ falseë¡œ)
function checkAnswers() {
    cssProperty.forEach(item => {
        let answer = item.name.trim().toLowerCase();
        answers[answer] = false;
    });
}

// ì˜¤ë‹µ ë³´ì—¬ì£¼ê¸°
function missAnswers() {
    searchMissAnswers.style.display = "block";

    cssProperty.forEach(item => {
        let answer = item.name.trim().toLocaleLowerCase();
        if (!answers[answer]) {
            searchMissAnswers.innerHTML += `&lt;span>${answer}&lt;/span>`;
        }
    })

}


// ì‹œê°„ ì„¤ì •í•˜ê¸°
function reduceTime() {
    timeReamining--;
    if (timeReamining &lt; 11) {
        document.querySelector(".time").style.background = "red";
    }
    if (timeReamining == 0) {
        endQuiz();
    }

    serachTime.innerText = displayTime();
}

// ì‹œê°„ í‘œì‹œí•˜ê¸° (ë¶„, ì´ˆ ë³€í™˜)
function displayTime() {
    if (timeReamining &lt;= 0) {
        return "0:00";
    } else {
        let minutes = Math.floor(timeReamining / 60);
        let seconds = Math.floor(timeReamining % 60);

        // ì´ˆ ë‹¨ìœ„ê°€ í•œìë¦¬ ì¼ë•Œ 0 ì¶”ê°€
        if (seconds &lt; 10) seconds = "0" + seconds;
        return minutes + ":" + seconds;
    }
}

// ê²Œì„ ë
function endQuiz() {
    // alert("ê²Œì„ ë");

    // ì˜¤ë‹µ ë³´ì—¬ì£¼ê¸°
    missAnswers();

    searchAudio.pause();
    musicStop.style.display = "none";
    document.querySelector(".search__audio .play").style.display = "none";

    // ì‹œì‘ë²„íŠ¼ ì¬í™œì„±í™”
    searchStart.style.display = "block";
    document.querySelector(".time").style.background = "#223547";
    timeReamining = 120;

    clearInterval(Timer);

    // ë©”ì„¸ì§€ ì¶œë ¥
    searchResultWrap.classList.add("show");
    let point = Math.round((answerCount / cssProperty.length) * 100);
    searchResult.innerHTML = `END &lt;br> ${answerCount} / ${cssProperty.length} &lt;br> Score : ${point}`

}

// ë‹¤ì‹œ ì…‹íŒ…í•˜ê¸°(ë‹¤ì‹œì‹œì‘ë²„íŠ¼ ëˆ„ë¦„)
function restart(){
    searchResultWrap.classList.remove("show");
    searchStart.style.display = "block";
    serachList.style.display = "none";
    searchAnswers.style.display = "none";
    searchAnswers.innerHTML = ``;
    searchMissAnswers.style.display = "none";
    searchMissAnswers.innerHTML = ``;
    answerCount = 0;
    document.querySelector(".answerNum").innerText = answerCount;
    startQuiz();
}

// ë²„íŠ¼ ì´ë²¤íŠ¸
searchStart.addEventListener("click", startQuiz);
searchInput.addEventListener("input", checkInput);
searchRestart.addEventListener("click", restart);

console.log(searchRestart)

// ìŒì•… ì •ì§€ëˆŒë €ì„ ë•Œ 
musicStop.addEventListener("click", () => {
    searchAudio.pause();
    searchAudio.currentTime = 0;
    musicStop.style.display = "none";
    document.querySelector(".search__audio .play").classList.add("show");
    document.querySelector(".search__audio .play").style.display = "block";
})
const musicPlay = document.querySelector(".search__audio .play").addEventListener("click", () => {
    searchAudio.play();
    musicStop.style.display = "block";
    document.querySelector(".search__audio .play").style.display = "none";

})
</code></pre>
            </div>

            <hr style="margin-bottom : 10px">
            <p class="p_desc" style="font-size: 14px; text-align: center;">ğŸ™‡â€â™€ï¸ í‹€ë¦° ì ì— ëŒ€í•œ ì§€ì ì€ ì–¸ì œë‚˜ í™˜ì˜í•©ë‹ˆë‹¤ ğŸ™‡â€â™‚ï¸</p>
            
        </div>
    </main> <!-- //main end -->
    <footer id="footer">
        <a href="mailto:sshin4882@naver.com">sshin4882@naver.com</a>
    </footer>
    <!-- //footer -->
    <script src="../../../javascript/assets/js/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
    </script>
</body>

</html>